# Rust ä»£ç†æ£€æµ‹å·¥å…·

ä¸€ä¸ªç”¨ Rust é‡å†™çš„ä»£ç†è®¢é˜…æ£€æµ‹å·¥å…·ï¼ŒåŸºäº [subs-check-pro](https://github.com/sinspired/subs-check-pro) é¡¹ç›®çš„æµ‹æ´»é€»è¾‘ã€‚

## åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°åŠŸèƒ½
- **å­˜æ´»æ£€æµ‹**: é€šè¿‡è®¿é—® `gstatic.com/generate_204` æ£€æŸ¥ä»£ç†æ˜¯å¦å¯ç”¨
- **åª’ä½“è§£é”æ£€æµ‹**: æ”¯æŒæ£€æµ‹ YouTubeã€Netflixã€Disney+ã€OpenAIã€Googleã€TikTokã€Gemini ç­‰æœåŠ¡çš„è§£é”çŠ¶æ€
- **Cloudflare æ£€æµ‹**: æ£€æŸ¥ä»£ç†èƒ½å¦è®¿é—® Cloudflare æœåŠ¡å¹¶è·å–åœ°ç†ä½ç½®ä¿¡æ¯
- **å¹¶å‘æ£€æµ‹**: ä½¿ç”¨ Tokio å¼‚æ­¥è¿è¡Œæ—¶å®ç°é«˜å¹¶å‘æ£€æµ‹
- **æ™ºèƒ½ä¹±åº**: æ ¹æ® IP CIDR å¯¹ä»£ç†èŠ‚ç‚¹è¿›è¡Œæ™ºèƒ½ä¹±åºï¼Œé¿å…ç›¸åŒç½‘æ®µçš„èŠ‚ç‚¹è¢«è¿ç»­æ£€æµ‹
- **è¿›åº¦æ˜¾ç¤º**: æ”¯æŒè¯¦ç»†çš„è¿›åº¦æ¡æ˜¾ç¤ºï¼ˆä½¿ç”¨ indicatif åº“ï¼‰
- **é…ç½®ç®¡ç†**: æ”¯æŒ YAML é…ç½®æ–‡ä»¶
- **ç»Ÿè®¡ä¿¡æ¯**: è¯¦ç»†çš„æ£€æµ‹ç»Ÿè®¡å’ŒæˆåŠŸç‡è®¡ç®—

### ğŸ”„ ä¸åŸé¡¹ç›®çš„å¯¹æ¯”

| åŠŸèƒ½ | subs-check-pro (Go) | æœ¬å®ç° (Rust) |
|------|-------------------|--------------|
| è¯­è¨€ | Go | Rust |
| å¹¶å‘æ¨¡å‹ | Goroutine + Channel | Tokio + async/await |
| é…ç½®æ ¼å¼ | YAML | YAML |
| è¿›åº¦æ˜¾ç¤º | è‡ªå®šä¹‰å®ç° | indicatif åº“ |
| åª’ä½“æ£€æµ‹ | å®Œæ•´å®ç° | åŸºç¡€å®ç° |
| æµ‹é€ŸåŠŸèƒ½ | å®Œæ•´å®ç° | åŸºç¡€å®ç° |
| è®¢é˜…è§£æ | å®Œæ•´å®ç° | ç¤ºä¾‹æ•°æ® |

## å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

ç¡®ä¿å·²å®‰è£… Rust å·¥å…·é“¾ï¼š

```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

### ç¼–è¯‘è¿è¡Œ

```bash
cd rust-hello
cargo run
```

### é…ç½®æ–‡ä»¶

é…ç½®æ–‡ä»¶ä½äº `config/config.yaml`ï¼Œé¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨ä½¿ç”¨é»˜è®¤é…ç½®ã€‚

## é¡¹ç›®ç»“æ„

```
rust-hello/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs          # ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ config/          # é…ç½®æ¨¡å—
â”‚   â”‚   â””â”€â”€ mod.rs       # é…ç½®ç»“æ„ä½“å’ŒåŠ è½½é€»è¾‘
â”‚   â”œâ”€â”€ proxy/           # ä»£ç†æ¨¡å—
â”‚   â”‚   â””â”€â”€ mod.rs       # ä»£ç†èŠ‚ç‚¹å®šä¹‰å’Œå·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ check/           # æ£€æµ‹æ¨¡å—
â”‚   â”‚   â””â”€â”€ mod.rs       # æ£€æµ‹é€»è¾‘å’Œç»“æœå¤„ç†
â”‚   â””â”€â”€ ui/              # ç”¨æˆ·ç•Œé¢æ¨¡å—
â”‚       â””â”€â”€ progress.rs  # è¿›åº¦æ˜¾ç¤ºå®ç°
â”œâ”€â”€ config/
â”‚   â””â”€â”€ config.yaml      # é…ç½®æ–‡ä»¶ç¤ºä¾‹
â”œâ”€â”€ Cargo.toml           # é¡¹ç›®ä¾èµ–
â””â”€â”€ README.md            # æœ¬æ–‡æ¡£
```

## é…ç½®è¯´æ˜

### ä¸»è¦é…ç½®é¡¹

```yaml
# æ£€æµ‹å‚æ•°
concurrent: 20           # å¹¶å‘çº¿ç¨‹æ•°
timeout: 6000            # è¶…æ—¶æ—¶é—´(æ¯«ç§’)
success_limit: 200       # æˆåŠŸèŠ‚ç‚¹æ•°é‡é™åˆ¶

# æµ‹é€Ÿè®¾ç½®
speed_test_url: "https://example.com/test.zip"  # æµ‹é€Ÿåœ°å€
min_speed: 128.0         # æœ€ä½æµ‹é€Ÿç»“æœ(KB/s)

# åª’ä½“æ£€æµ‹
media_check: true        # æ˜¯å¦å¯ç”¨åª’ä½“è§£é”æ£€æµ‹

# è¿›åº¦æ˜¾ç¤º
print_progress: true     # æ˜¯å¦æ˜¾ç¤ºè¿›åº¦æ¡
progress_mode: "auto"    # è¿›åº¦æ˜¾ç¤ºæ¨¡å¼
```

### æ”¯æŒçš„ä»£ç†åè®®

- HTTP/HTTPS
- SOCKS5/SOCKS5H
- VMess
- VLess
- Trojan
- Shadowsocks (SS)
- ShadowsocksR (SSR)
- Hysteria

## ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨

```bash
# ä½¿ç”¨é»˜è®¤é…ç½®è¿è¡Œ
cargo run

# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ–‡ä»¶
cargo run -- --config path/to/config.yaml
```

### ä»£ç ç¤ºä¾‹

```rust
use rust_proxy_checker::{Config, ProxyChecker, ProxyNode};

#[tokio::main]
async fn main() {
    // åŠ è½½é…ç½®
    let config = Config::load_from_file("config.yaml").unwrap();
    
    // åˆ›å»ºæ£€æµ‹å™¨
    let checker = ProxyChecker::new(config);
    
    // åˆ›å»ºä»£ç†èŠ‚ç‚¹
    let proxies = vec![
        ProxyNode::new("ä»£ç†1", "127.0.0.1", 7890, "http"),
        ProxyNode::new("ä»£ç†2", "example.com", 443, "vmess")
            .with_uuid("12345678-1234-1234-1234-123456789012"),
    ];
    
    // æ‰§è¡Œæ£€æµ‹
    let results = checker.check_proxies(proxies).await;
    
    // æ‰“å°ç»“æœ
    for result in results {
        println!("{}: {}", result.proxy.name, result.is_alive);
    }
}
```

## æ£€æµ‹æµç¨‹

1. **åˆå§‹åŒ–**: åŠ è½½é…ç½®ï¼Œåˆ›å»º HTTP å®¢æˆ·ç«¯
2. **å­˜æ´»æ£€æµ‹**: è®¿é—® `gstatic.com/generate_204` æ£€æŸ¥ä»£ç†æ˜¯å¦å­˜æ´»
3. **Cloudflare æ£€æµ‹**: æ£€æŸ¥ä»£ç†èƒ½å¦è®¿é—® Cloudflare å¹¶è·å–åœ°ç†ä½ç½®
4. **æµ‹é€Ÿæ£€æµ‹**: ä¸‹è½½æµ‹è¯•æ–‡ä»¶è®¡ç®—ä»£ç†é€Ÿåº¦ï¼ˆå¦‚æœå¯ç”¨ï¼‰
5. **åª’ä½“è§£é”æ£€æµ‹**: æ£€æŸ¥å„ç§æµåª’ä½“æœåŠ¡çš„å¯è®¿é—®æ€§ï¼ˆå¦‚æœå¯ç”¨ï¼‰
6. **ç»“æœæ”¶é›†**: æ”¶é›†æ‰€æœ‰æ£€æµ‹ç»“æœå¹¶ç”Ÿæˆç»Ÿè®¡ä¿¡æ¯

## æ€§èƒ½ç‰¹ç‚¹

- **å¼‚æ­¥å¹¶å‘**: ä½¿ç”¨ Tokio è¿è¡Œæ—¶å®ç°é«˜æ•ˆçš„å¼‚æ­¥ I/O
- **å†…å­˜å®‰å…¨**: Rust çš„æ‰€æœ‰æƒç³»ç»Ÿç¡®ä¿å†…å­˜å®‰å…¨
- **é›¶æˆæœ¬æŠ½è±¡**: Rust çš„é›¶æˆæœ¬æŠ½è±¡æä¾›é«˜æ€§èƒ½
- **é”™è¯¯å¤„ç†**: ä½¿ç”¨ anyhow å’Œ thiserror è¿›è¡Œæ¸…æ™°çš„é”™è¯¯å¤„ç†

## å¼€å‘è®¡åˆ’

### çŸ­æœŸç›®æ ‡
- [ ] æ·»åŠ å‘½ä»¤è¡Œå‚æ•°æ”¯æŒ
- [ ] å®ç°è®¢é˜…é“¾æ¥è§£æ
- [ ] æ·»åŠ ç»“æœå¯¼å‡ºåŠŸèƒ½ï¼ˆJSON/YAMLï¼‰
- [ ] å®ç°å®šæ—¶æ£€æµ‹ä»»åŠ¡

### é•¿æœŸç›®æ ‡
- [ ] å®ç°å®Œæ•´çš„æµ‹é€ŸåŠŸèƒ½
- [ ] æ·»åŠ æ›´å¤šåª’ä½“æœåŠ¡æ£€æµ‹
- [ ] æ”¯æŒé…ç½®æ–‡ä»¶ç”Ÿæˆï¼ˆClashã€Sing-boxï¼‰
- [ ] æ·»åŠ  Web UI ç•Œé¢
- [ ] æ”¯æŒ Docker éƒ¨ç½²

## è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. å¼€å¯ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æºã€‚

## è‡´è°¢

- [subs-check-pro](https://github.com/sinspired/subs-check-pro) - åŸ Go å®ç°
- [Tokio](https://tokio.rs/) - å¼‚æ­¥è¿è¡Œæ—¶
- [reqwest](https://github.com/seanmonstar/reqwest) - HTTP å®¢æˆ·ç«¯
- [indicatif](https://github.com/console-rs/indicatif) - è¿›åº¦æ¡åº“

## ç›¸å…³é¡¹ç›®

- [clash](https://github.com/Dreamacro/clash) - Go ç¼–å†™çš„è§„åˆ™ä»£ç†å·¥å…·
- [sing-box](https://github.com/SagerNet/sing-box) - é€šç”¨ä»£ç†å¹³å°
- [v2ray-core](https://github.com/v2fly/v2ray-core) - ä»£ç†å¹³å°

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œè¯·éµå®ˆå½“åœ°æ³•å¾‹æ³•è§„ã€‚